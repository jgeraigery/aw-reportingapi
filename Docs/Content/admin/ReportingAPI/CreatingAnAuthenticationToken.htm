<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="welcomeAdmin.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Creating an authentication token</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/V2-Online-Help.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/NoteTable.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/StandardTable.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body class="MasterPage">
        <p class="MasterPageDocTitle"><span class="GlobalVariablesDocTitle">HCP Anywhere Reporting API Reference Guide</span>
        </p>
        <div class="bodyContent">
            <div class="MasterPageBreadcrumbs">
                <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><span class="MCBreadcrumbs">Creating an authentication token</span>
                </div>
            </div>
            <hr width="100%" size="0" align="center" />
            <div class="MasterPageBodyAndMiniTOCProxyContainer">
                <h1>Creating an authentication token</h1>
                <p>To request a report, you need to create a temporary authentication token using your HCP Anywhere username and password. You cannot use  the starter administrator account with the Reporting API. The starter administrator account is the account that was first used to access the HCP Anywhere Management Console and which has the username "admin".</p>
                <p>In subsequent requests, the authentication token is supplied and used by the authorization endpoint to verify that you have the appropriate role to access an administrative or audit report. </p>
                <p>
To create an authentication token, you need to submit your  HCP Anywhere username and password to the authorization endpoint port 8000 or 7999. Typically, you use port 8000 because port 7999 is unencrypted and only available if SSL termination is enabled. For more information on enabling SSL termination, see <a href="../config/ADM-configHTTP.htm" class="MCXref xref">Accepting SSL-terminated (HTTP) traffic</a>. </p>
                <p>To request an authentication token, you also need to provide the following information in your request:</p>
                <p class="ListBullet-1" data-mc-autonum="•"><span class="autonumber"><span class="Bullet1">•</span></span><span class="GUI">Version</span> — The version of the reporting API. The example version used in this help is <span class="SyntaxVariable">2.1.0</span>.</p>
                <p class="ListBullet-1" data-mc-autonum="•"><span class="autonumber"><span class="Bullet1">•</span></span><span class="GUI">uniqueId</span> — A string that is unique to the computer running the Reporting API. The uniqueID is used to differentiate between two computers running the reporting API simultaneously with the same authorization token. The example uniqueID string used in this help is <span class="SyntaxVariable">uniqueID</span>.</p>
                <table style="width: 550px;mc-table-style: url('../../Resources/TableStyles/NoteTable.css');margin-left: 25px;margin-right: auto;" class="TableStyle-NoteTable" cellspacing="0">
                    <col class="Column-NoteIcon" />
                    <col class="Column-NoteText" />
                    <tbody>
                        <tr class="Body-Body1">
                            <td class="BodyB-NoteIcon-Body1">
                                <img src="../../Resources/Images/noteTables/TipWebHelp_41x37.png" class="Note" style="width: 41;height: 37;" data-mc-conditions="GlobalConditions.HelpOnly" />
                            </td>
                            <td class="BodyA-NoteText-Body1">
                                <p class="Tip" data-mc-autonum="&lt;b&gt;Tip: &#160;&lt;/b&gt;"><span class="autonumber"><span><b>Tip: &#160;</b></span></span>Make sure your uniqueId is the same for a given computer running the Reporting API to prevent from reaching the authentication token limit.</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p class="ListBullet-1" data-mc-autonum="•"><span class="autonumber"><span class="Bullet1">•</span></span><span class="GUI">clientNickname</span> — A string used to identify the computer. The example clientNickname string used in this help is <span class="SyntaxVariable">clientNickname</span>. </p>
                <p class="ListBullet-1" data-mc-autonum="•"><span class="autonumber"><span class="Bullet1">•</span></span><span class="GUI">X-HCPAW-MANAGEMENT-API-VERSION</span> — The HCP&#160;Anywhere API version. The example version used in this help is <span class="SyntaxVariable">2.1.0</span>.</p>
                <p>Each user can have up to nine valid authentication tokens at any given time. Each authentication token lasts for one day. Generating a tenth token causes the oldest valid token to expire.</p>
                <p>If you attempt to use an expired authentication token when requesting a report, the request fails with a 401 unauthorized response code. In this case, you need to generate a new authorization token and replace the expired one before continuing with your request.</p>
                <p>Here is an example of a curl command requesting an authentication token. In this example the HCP Anywhere username is <span class="SyntaxVariable">lgreen</span> and the password is <span class="SyntaxVariable">mypassword</span>:</p>
                <p style="font-style: italic;">
Curl command request</p>
                <p class="Display-1">curl -ku "lgreen:mypassword" -d "grant_type=urn:hds:oauth:negotiate-client&amp;version=2.1.0&amp;uniqueId=myUniqueID&amp;clientNickname=myName" -H "X-HCPAW-MANAGEMENT-API-VERSION: 2.1.0" https://api.anywhere.example.com:8000/login/oauth</p>
                <div class="noBreak">
                    <p style="font-style: italic;">The response you receive if credentials are valid</p>
                </div>
                <p class="Display-1">{<br />"access_token": "bH30R3pFE5w4LD25OJmjZS/7jS/ZF6gPVSkNWVsjQNinFxcOUeXEHcX26eACrvjH5SUX29C8DVygdGaH2n5hnlzlkxVpqxgdc4ai+9w\u003d"<br />"token_type":"Bearer",<br />"expires_in":86400<br />}<br /></p>
                <p>The following table describes the error codes you might run into when requesting an authentication token.</p>
                <table style="width: 5.5in;mc-table-style: url('../../Resources/TableStyles/StandardTable.css');margin-right: auto;" class="TableStyle-StandardTable" cellspacing="0">
                    <caption> <![CDATA[ ]]></caption>
                    <col class="TableStyle-StandardTable-Column-Column1" />
                    <col class="TableStyle-StandardTable-Column-Column1" />
                    <col class="TableStyle-StandardTable-Column-Column1" />
                    <thead>
                        <tr class="TableStyle-StandardTable-Head-Header1">
                            <th class="TableStyle-StandardTable-HeadE-Column1-Header1">Response code</th>
                            <th class="TableStyle-StandardTable-HeadE-Column1-Header1">Error string</th>
                            <th class="TableStyle-StandardTable-HeadD-Column1-Header1">Meaning</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="TableStyle-StandardTable-Body-Body1">
                            <td class="TableStyle-StandardTable-BodyE-Column1-Body1">400</td>
                            <td class="TableStyle-StandardTable-BodyE-Column1-Body1">invalid_request </td>
                            <td class="TableStyle-StandardTable-BodyD-Column1-Body1">Request body was null or contained invalid values. </td>
                        </tr>
                        <tr class="TableStyle-StandardTable-Body-Body1">
                            <td class="TableStyle-StandardTable-BodyE-Column1-Body1">400</td>
                            <td class="TableStyle-StandardTable-BodyE-Column1-Body1">client_not_found </td>
                            <td class="TableStyle-StandardTable-BodyD-Column1-Body1">Provided client id did not exist.</td>
                        </tr>
                        <tr class="TableStyle-StandardTable-Body-Body1">
                            <td class="TableStyle-StandardTable-BodyE-Column1-Body1">401</td>
                            <td class="TableStyle-StandardTable-BodyE-Column1-Body1">invalid_token </td>
                            <td class="TableStyle-StandardTable-BodyD-Column1-Body1">The provided token is expired or invalid. </td>
                        </tr>
                        <tr class="TableStyle-StandardTable-Body-Body1">
                            <td class="TableStyle-StandardTable-BodyE-Column1-Body1">403</td>
                            <td class="TableStyle-StandardTable-BodyE-Column1-Body1">client_too_old </td>
                            <td class="TableStyle-StandardTable-BodyD-Column1-Body1">The provided client version is incompatible with the features the user is using. </td>
                        </tr>
                        <tr class="TableStyle-StandardTable-Body-Body1">
                            <td class="TableStyle-StandardTable-BodyE-Column1-Body1">403</td>
                            <td class="TableStyle-StandardTable-BodyE-Column1-Body1">invalid_user </td>
                            <td class="TableStyle-StandardTable-BodyD-Column1-Body1">The user provided is not permitted to generate tokens.</td>
                        </tr>
                        <tr class="TableStyle-StandardTable-Body-Body1">
                            <td class="TableStyle-StandardTable-BodyE-Column1-Body1">403</td>
                            <td class="TableStyle-StandardTable-BodyE-Column1-Body1">forbidden_request </td>
                            <td class="TableStyle-StandardTable-BodyD-Column1-Body1">The request provided a client id that the requesting user did not have access to. </td>
                        </tr>
                        <tr class="TableStyle-StandardTable-Body-Body1">
                            <td class="TableStyle-StandardTable-BodyB-Column1-Body1">413</td>
                            <td class="TableStyle-StandardTable-BodyB-Column1-Body1">user_over_quota_for_clients </td>
                            <td class="TableStyle-StandardTable-BodyA-Column1-Body1">The user provided has too many MAPI clients in use. Each user  is allowed up to 11 MAPI clients, depending on the administrator's settings.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="MasterPageBodyAndMiniTOCProxyContainer">
                <!--the inline styling on the MiniTOC proxy is OK.  It does NOT appear in the output and the mc-toc-depth property is required for including the correct items in the Mini TOC-->
            </div>
            <!--BeginHideIfBranded-->
            <p class="MasterPageLegalLinks"><i><a href="../../Resources/WebHelpLegal/Trademark.htm" class="MCTopicPopup MCTopicPopupHotSpot a aPopup" data-mc-width="auto" data-mc-height="auto">Trademarks</a> and <a href="../../Resources/WebHelpLegal/LegalDisclaimer.htm" class="MCTopicPopup MCTopicPopupHotSpot a aPopup" data-mc-width="auto" data-mc-height="auto">Legal Disclaimer</a></i>
            </p>
            <p style="font-size: 9pt;margin-left:0;"><span style="font-size: 8pt;">© <span class="GlobalVariablesCopyright">copyright–use comma</span> <span class="GlobalVariablesCopyrightOwner">Hitachi Data Systems Corporation</span>. All rights reserved.</span>
            </p>
            <!--EndHideIfBranded-->
            <!--BeginHideIfBranded-->
            <!--EndHideIfBranded-->
        </div>
    </body>
</html>